(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,76201,e=>{"use strict";e.s(["default",()=>x]);var a=e.i(43476),l=e.i(7670),s=e.i(62201),r=e.i(53145),t=e.i(94814),i=e.i(46932),o=e.i(55487),n=e.i(71645),c=e.i(18566),d=e.i(63816),m=e.i(64020),p=e.i(22016),u=e.i(57688);let x=()=>{let{cart:e}=(0,o.useSelector)(e=>e.cart),x=(0,c.useRouter)(),f=(0,o.useDispatch)(),h=s.object({fullName:s.string().min(1,"Le nom complet est requis"),email:s.string().email("Email invalide"),city:s.string().min(1,"La ville est requis").max(50),adress:s.string().min(10,"L'adress doit contenir au moins 10 caractères"),phone:s.string().min(1,"Le téléphone est requis").regex(/^\+?\d{10,15}$/,"Numéro de téléphone invalide")}),{register:g,handleSubmit:y,reset:N,formState:{errors:j,isSubmitting:v,isSubmitSuccessful:b}}=(0,r.useForm)({resolver:(0,t.zodResolver)(h)}),w=async a=>{let l=e.map(e=>({id:e.id,quantity:e.quantity}));try{let e=await d.axiosInstance.post("/api/commandes/store",JSON.stringify({commande:a,products:l}),{headers:{"Content-Type":"application/json"}});if(200==e.status){f((0,m.ToggleSummary)(!1));let e=setTimeout(()=>{f((0,m.ViderCart)()),N(),f((0,m.ToggleSummary)(!0))},7e3);return()=>clearTimeout(e)}}catch(e){alert("Réessayez la validation de la commande, il y a un problème"),f((0,m.ViderCart)())}};return(0,n.useEffect)(()=>{0==e.length&&x.push("/products_categories")},[e,x]),b?(0,a.jsxs)("div",{className:" md:w-1/2 mx-auto flex select-none  justify-center items-center font-A  flex-col gap-y-5",children:[(0,a.jsx)("div",{className:"relative h-52 w-52 ",children:(0,a.jsx)(u.default,{fill:!0,alt:"icon confirmation",src:"/images/cart/iconconfirm.webp",className:"w-full h-full absolute pointer-events-none object-cover"})}),(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,a.jsx)("h1",{className:"   text-center font-D text-2xl",children:"Votre commande a été enregistrée avec succès."}),(0,a.jsx)("p",{className:"text-center max-w-md text-grey",children:"Nous vous contacterons par téléphone pour confirmer votre commande"})]}),(0,a.jsx)(p.default,{href:"/products_categories",className:"w-fit text-sm flex bg-second-hover font-D  border p-2 rounded-lg text-center bg-second text-white",children:"Continuer vos achats"})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-y-5 w-full",children:[(0,a.jsx)("h1",{className:" font-D text-3xl tracking-wider",children:"Validation de la commande"}),(0,a.jsx)(i.motion.div,{className:" border-t border-[#eeeded]   flex flex-col gap-y-5 rounded-xl shadow-2xl shadow-[#d9d5d5c9] p-5 w-full",children:(0,a.jsxs)("form",{onSubmit:y(w),className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,a.jsx)("input",{autoComplete:"name",placeholder:"Entrez votre nom et prénom...",...g("fullName"),name:"fullName",className:(0,l.default)(j.fullName?"border-[red] placeholder:text-[#ff000083]":"border-gray-300 ","form-input"),type:"text"}),j.fullName&&(0,a.jsx)("p",{className:"error-input",children:j.fullName.message})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,a.jsx)("input",{autoComplete:"email",...g("email"),name:"email",className:(0,l.default)(j.email?"border-[red] placeholder:text-[#ff000083]":"border-gray-300 ","form-input"),placeholder:"Entrez votre Email...",type:"email"}),j.email&&(0,a.jsx)("p",{className:"error-input",children:j.email.message})]})]}),(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,a.jsx)("div",{className:"w-full flex flex-col gap-y-1",children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,a.jsx)("input",{autoComplete:"tel",...g("phone"),name:"phone",className:(0,l.default)(j.phone?"border-[red] placeholder:text-[#ff000083]":"border-gray-300 ","form-input"),type:"tel",placeholder:"Entrez votre Téléphone..."}),j.phone&&(0,a.jsx)("p",{className:"error-input",children:j.phone.message})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,a.jsx)("input",{autoComplete:"address-level1",placeholder:"Entrez  La ville...",...g("city"),name:"city",className:(0,l.default)(j.city?"border-[red] placeholder:text-[#ff000083]":"border-gray-300 ","form-input"),type:"text"}),j.city&&(0,a.jsx)("p",{className:"error-input",children:j.city.message})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,a.jsx)("textarea",{autoComplete:"address-level1",placeholder:"Entrez L'adress...",...g("adress"),name:"adress",className:(0,l.default)(j.adress?"border-[red] placeholder:text-[#ff000083]":"border-gray-300 ","form-input   px-4 py-3 h-32 resize-none")}),j.adress&&(0,a.jsx)("p",{className:"error-input",children:j.adress.message})]}),(0,a.jsx)("button",{disabled:v,className:(0,l.default)(v&&"opacity-[0.8]"," bg-main bg-main-hover kinatech-btn w-fit "),children:v?"en cours...":"Commander"})]})},1)]})}}]);