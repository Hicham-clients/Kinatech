module.exports=[9156,a=>{"use strict";a.s(["default",()=>o]);var b=a.i(87924),c=a.i(98621),d=a.i(54714),e=a.i(95245),f=a.i(59501),g=a.i(46271),h=a.i(14174),i=a.i(72131),j=a.i(50944),k=a.i(28337),l=a.i(63888),m=a.i(38246),n=a.i(71987);let o=()=>{let{cart:a}=(0,h.useSelector)(a=>a.cart),o=(0,j.useRouter)(),p=(0,h.useDispatch)(),q=d.object({fullName:d.string().min(1,"Le nom complet est requis"),email:d.string().email("Email invalide"),city:d.string().min(1,"La ville est requis").max(50),adress:d.string().min(10,"L'adress doit contenir au moins 10 caractères"),phone:d.string().min(1,"Le téléphone est requis").regex(/^\+?\d{10,15}$/,"Numéro de téléphone invalide")}),{register:r,handleSubmit:s,reset:t,formState:{errors:u,isSubmitting:v,isSubmitSuccessful:w}}=(0,e.useForm)({resolver:(0,f.zodResolver)(q)}),x=async b=>{let c=a.map(a=>({id:a.id,quantity:a.quantity}));try{let a=await k.axiosInstance.post("/api/commandes/store",JSON.stringify({commande:b,products:c}),{headers:{"Content-Type":"application/json"}});if(200==a.status){p((0,l.ToggleSummary)(!1));let a=setTimeout(()=>{p((0,l.ViderCart)()),t(),p((0,l.ToggleSummary)(!0))},7e3);return()=>clearTimeout(a)}}catch(a){alert("Réessayez la validation de la commande, il y a un problème"),p((0,l.ViderCart)())}};return(0,i.useEffect)(()=>{0==a.length&&o.push("/products_categories")},[a,o]),w?(0,b.jsxs)("div",{className:" md:w-1/2 mx-auto flex select-none  justify-center items-center font-A  flex-col gap-y-5",children:[(0,b.jsx)("div",{className:"relative h-52 w-52 ",children:(0,b.jsx)(n.default,{fill:!0,alt:"icon confirmation",src:"/images/cart/iconconfirm.webp",className:"w-full h-full absolute pointer-events-none object-cover"})}),(0,b.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,b.jsx)("h1",{className:"   text-center font-D text-2xl",children:"Votre commande a été enregistrée avec succès."}),(0,b.jsx)("p",{className:"text-center max-w-md text-grey",children:"Nous vous contacterons par téléphone pour confirmer votre commande"})]}),(0,b.jsx)(m.default,{href:"/products_categories",className:"w-fit text-sm flex bg-second-hover font-D  border p-2 rounded-lg text-center bg-second text-white",children:"Continuer vos achats"})]}):(0,b.jsxs)("div",{className:"flex flex-col gap-y-5 w-full",children:[(0,b.jsx)("h1",{className:" font-D text-3xl tracking-wider",children:"Validation de la commande"}),(0,b.jsx)(g.motion.div,{className:" border-t border-[#eeeded]   flex flex-col gap-y-5 rounded-xl shadow-2xl shadow-[#d9d5d5c9] p-5 w-full",children:(0,b.jsxs)("form",{onSubmit:s(x),className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,b.jsx)("input",{autoComplete:"name",placeholder:"Entrez votre nom et prénom...",...r("fullName"),name:"fullName",className:(0,c.default)(u.fullName?"border-[red] placeholder:text-[#ff000083]":"border-gray-300 ","form-input"),type:"text"}),u.fullName&&(0,b.jsx)("p",{className:"error-input",children:u.fullName.message})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,b.jsx)("input",{autoComplete:"email",...r("email"),name:"email",className:(0,c.default)(u.email?"border-[red] placeholder:text-[#ff000083]":"border-gray-300 ","form-input"),placeholder:"Entrez votre Email...",type:"email"}),u.email&&(0,b.jsx)("p",{className:"error-input",children:u.email.message})]})]}),(0,b.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,b.jsx)("div",{className:"w-full flex flex-col gap-y-1",children:(0,b.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,b.jsx)("input",{autoComplete:"tel",...r("phone"),name:"phone",className:(0,c.default)(u.phone?"border-[red] placeholder:text-[#ff000083]":"border-gray-300 ","form-input"),type:"tel",placeholder:"Entrez votre Téléphone..."}),u.phone&&(0,b.jsx)("p",{className:"error-input",children:u.phone.message})]})}),(0,b.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,b.jsx)("input",{autoComplete:"address-level1",placeholder:"Entrez  La ville...",...r("city"),name:"city",className:(0,c.default)(u.city?"border-[red] placeholder:text-[#ff000083]":"border-gray-300 ","form-input"),type:"text"}),u.city&&(0,b.jsx)("p",{className:"error-input",children:u.city.message})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,b.jsx)("textarea",{autoComplete:"address-level1",placeholder:"Entrez L'adress...",...r("adress"),name:"adress",className:(0,c.default)(u.adress?"border-[red] placeholder:text-[#ff000083]":"border-gray-300 ","form-input   px-4 py-3 h-32 resize-none")}),u.adress&&(0,b.jsx)("p",{className:"error-input",children:u.adress.message})]}),(0,b.jsx)("button",{disabled:v,className:(0,c.default)(v&&"opacity-[0.8]"," bg-main bg-main-hover kinatech-btn w-fit "),children:v?"en cours...":"Commander"})]})},1)]})}}];

//# sourceMappingURL=src_app_cart__components_Checkout_tsx_e71a4f92._.js.map